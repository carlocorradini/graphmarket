<p *ngIf="loading">Loading...</p>

<div *ngIf="!loading">
  <div class="uk-grid-column-small uk-grid-match uk-child-width-1-3@s" uk-grid>
    <a *ngFor="let product of products" [routerLink]="['/products', product.id]"
      class="uk-card uk-card-default uk-box-shadow-hover-large uk-text-center"
      [ngClass]="product.available ? '' : 'uk-disabled'">
      <div class="uk-card-media-top">
        <img
          src="{{ product.cover ? product.cover : 'https://res.cloudinary.com/dxiqa0xwa/image/upload/v1609604389/graphmarket/product/photo/product.png' }}"
          alt="{{ product.name }}" width="512" height="512" loading="lazy" />
        <div class="uk-card-badge uk-label">{{ product.quantity }}</div>
      </div>
      <div class="uk-card-body">
        <h3 class="uk-card-title">{{ product.name }}</h3>
      </div>
      <div class="uk-card-footer">
        <p class="uk-text-normal uk-margin-remove-top">
          <ng-template [ngIf]="product.available" [ngIfElse]="productNotAvailable">
            {{ product.price }} $
          </ng-template>
          <ng-template #productNotAvailable>
            -
          </ng-template>
        </p>
        <star-rating [starType]="'svg'" [rating]="product.rating" [step]="0.5" [numOfStars]="5" [readOnly]="true"
          [showHalfStars]="true" [disabled]="product.rating === 0 ? true : false" staticColor="ok"></star-rating>
      </div>
    </a>
  </div>

  <button class="uk-button uk-button-primary uk-button-large uk-margin uk-align-center" (click)="fetchMore()">
    LOAD MORE
  </button>

</div>